<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tomographer: MHWalker Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tomographer_extra_css.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tomographer
   &#160;<span id="projectnumber">v4.0</span>
   </div>
   <div id="projectbrief">Tomographer C++ Framework Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_interface_m_h_walker.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MHWalker Interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>This is a &lsquo;type interface.&rsquo; See <a class="el" href="page_type_interfaces.html">Type Interfaces</a> for more info on what that is.</em></p>
<p>A <em>MHWalker</em> compliant type describes a particular Metropolis-Hastings walk on some state space. It takes care for example of providing candidate new points (jump function), and calculating the probability ratio for the jump.</p>
<p>In the following documentation, \( P(x) \) designates the positive function which drives the Metropolis-Hastings random walk. The collected samples will (asymptotically) be distributed according to \( P(x) / \int P(x)\,dx \).</p>
<p>For instance, the <a class="el" href="class_tomographer_1_1_m_h_random_walk.html">Tomographer::MHRandomWalk</a> class needs to be provided a <em>MHWalker</em> compliant type in order to carry out the random walk.</p>
<p>A type implementing the <em>MHWalker</em> interface must provide the following types:</p>
<dl class="section user"><dt>typedef ... PointType</dt><dd>The type needed to represent a point in state space in which we are performing a random walk. An object of such type is never default-constructed, but always copy-constructed from another <em>PointType</em>. One should also be able to assign a <em>PointType</em> to another <code>PointType</code> (e.g. <code>curpt = other_point</code>).</dd></dl>
<dl class="section user"><dt>typedef ... StepRealType</dt><dd>The type needed to represent a step size. This will most likely be a <code>double</code> or some floating-point type.</dd></dl>
<dl class="section user"><dt>typedef ... FnValueType &mdash; required only if UseFnSyntaxType != MHUseFnRelativeValue</dt><dd>The return value type of the function evaluated at each point during the Metropolis-Hastings random walk. Usually this is <code>double</code> or some floating-point type. You do not need to provide this typedef if <code>UseFnSyntaxType</code> is set to <code>MHUseFnRelativeValue</code>.</dd></dl>
<p>A <em>MHWalker</em> must provide the following constant enumeration values:</p>
<dl class="section user"><dt>static constexpr int UseFnSyntaxType = ...</dt><dd>Specifies how we calculate the function probability ratio of two points in the random walk. <code>UseFnSyntaxType</code> should be set to one of either <a class="el" href="namespace_tomographer.html#a5c71906ac38bbf2b7cf92c4ab53919eea178e386caccd581f4480e589fb6786a9">Tomographer::MHUseFnValue</a> (this class calculates the function value at each point), <a class="el" href="namespace_tomographer.html#a5c71906ac38bbf2b7cf92c4ab53919eea5ccc9aa81cb7f02d54d89ca46cab91cf">Tomographer::MHUseFnLogValue</a> (this class calculates the natural logarithm of the function at each point), or <a class="el" href="namespace_tomographer.html#a5c71906ac38bbf2b7cf92c4ab53919eea79dee0fd6d1d562e804aed740e19328b">Tomographer::MHUseFnRelativeValue</a> (this class calculates the ratio of the values at two points). See below, "Role of
    UseFnSyntaxType".</dd></dl>
<p>And must provide the following members:</p>
<dl class="section user"><dt>MHWalker(MHWalker&amp;&amp; other)</dt><dd>A MHWalker type must have a move constructor.</dd></dl>
<dl class="section user"><dt>PointType startPoint()</dt><dd>Should return the starting point for the random walk. This function will be called before <em>init()</em>.</dd></dl>
<dl class="section user"><dt>void init()</dt><dd>Will be called when beginning the random walk, i.e. just before the first thermalization iteration.</dd></dl>
<dl class="section user"><dt>void thermalizingDone()</dt><dd>This method is called after all the thermalization sweeps have finished, and before starting with the live iterations. Typically this function shouldn't do anything, it's just provided for convenience.</dd></dl>
<dl class="section user"><dt>void done()</dt><dd>Called after the random walk has been completed and all samples collected.</dd></dl>
<dl class="section user"><dt>PointType jumpFn(const PointType &amp; curpt, StepRealType step_size)</dt><dd>Provide the next point where the random walk should consider jumping to. This function should return a new point depending on the current point <em>curpt</em>, according to some symmetric proposal distribution.</dd></dl>
<p>The jump function may consider using the <em>step_size</em> to tune the "width" of the proposal distribution. However <em>jumpFn()</em> is free to disregard the <em>step_size</em> argument. The class carrying out the random walk (such as <a class="el" href="class_tomographer_1_1_m_h_random_walk.html">Tomographer::MHRandomWalk</a>) typically passes here a value which was provided to their constructor, simply for convenience.</p>
<dl class="section user"><dt>FnValueType fnVal(const PointType &amp; curpt)</dt><dd><em>[Required only if UseFnSyntaxType == MHUseFnValue.]</em> If <em>UseFnSyntaxType==MHUseFnValue</em>, this function should return the value of the function \( P(x) \) defining the random walk, evaluated at the point <em>curpt</em>. See below ("Role of UseFnSyntaxType").</dd></dl>
<dl class="section user"><dt>FnValueType fnLogVal(const PointType &amp; curpt)</dt><dd><em>[Required only if UseFnSyntaxType == MHUseFnLogValue.]</em> If <em>UseFnSyntaxType==MHUseFnLogValue</em>, this function should return the value of the function \( \ln P(x) \) defining the random walk, evaluated at the point <em>curpt</em>. See below ("Role of UseFnSyntaxType").</dd></dl>
<dl class="section user"><dt>double fnRelVal(const PointType &amp; newpt, const PointType &amp; curpt)</dt><dd><em>[Required only if UseFnSyntaxType == MHUseFnRelativeValue.]</em> If <em>UseFnSyntaxType==MHUseFnRelativeValue</em>, this function should return the ratio \( P(\mathrm{newpt})/P(\mathrm{curpt}) \). See below ("Role of
    UseFnSyntaxType").</dd></dl>
<p><br />
</p>
<p><a class="anchor" id="labelMHWalkerUseFnSyntaxType"></a></p><dl class="section user"><dt>Role of <code>UseFnSyntaxType</code>:</dt><dd>In a Metropolis-Hastings random walk, the probability according to which one jumps to the next proposed point is given by the ratio of the values of the function \( P(x) \). There are three ways this class can provide this probability ratio.</dd></dl>
<dl class="section user"><dt></dt><dd><ol type="1">
<li>You may provide the value \( P(x) \) itself. In this case, set <em>UseFnSyntaxTYPE = <a class="el" href="namespace_tomographer.html#a5c71906ac38bbf2b7cf92c4ab53919eea178e386caccd581f4480e589fb6786a9" title="Provides the MH function value at each point (see Role of UseFnSyntaxType) ">Tomographer::MHUseFnValue</a></em>. The class must define the member function <em>fnVal()</em> as described above. It doesn't have to provide the member functions <em>fnLogVal()</em> or <em>fnRelVal()</em>.</li>
</ol>
</dd></dl>
<dl class="section user"><dt></dt><dd><ol type="1">
<li>You may provide the natural logarithm of the function, \( \ln P(x) \). Choose this option if it is more natural to calculate \( \ln P(x) \) instead of \( P(x) \) (for instance, if P(x) is a product of many terms). The random walk class (<a class="el" href="class_tomographer_1_1_m_h_random_walk.html">Tomographer::MHRandomWalk</a>) will not calculate the exponential of the value you give, but rather the exponential of the difference of two values of \( \ln P(x) \) at two points in order to directly optain the probability ratio. In this case, set set <em>UseFnSyntaxTYPE = <a class="el" href="namespace_tomographer.html#a5c71906ac38bbf2b7cf92c4ab53919eea5ccc9aa81cb7f02d54d89ca46cab91cf" title="Provides the logarithm MH function value at each point (see Role of UseFnSyntaxType) ...">Tomographer::MHUseFnLogValue</a></em>. The class must define the member function <em>fnLogVal()</em> as described above. It doesn't have to provide the member functions <em>fnVal()</em> or <em>fnRelVal()</em>.</li>
</ol>
</dd></dl>
<dl class="section user"><dt></dt><dd><ol type="1">
<li>You may directly provide the ratio of values for two points \( P(x&#39;)/P(x) \). in this case, set <em>UseFnSyntaxTYPE = Tomographer::MHUseRelativeValue</em>. The class must define the member function <em>fnRelVal()</em> as described above. It doesn't have to provide the member functions <em>fnVal()</em> or <em>fnLogVal()</em>. </li>
</ol>
</dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!--
 * This file is part of the Tomographer project, which is distributed under the
 * terms of the MIT license.
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2016 ETH Zurich, Institute for Theoretical Physics, Philippe Faist
 * Copyright (c) 2017 Caltech, Institute for Quantum Information and Matter, Philippe Faist
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">%Tomographer C++ Framework: API Documentation</a></li><li class="navelem"><a class="el" href="page_type_interfaces.html">Type Interfaces</a></li>
    <li class="footer">Generated on Tue Mar 21 2017 18:18:01 for Tomographer by
    <a href="http://www.doxygen.org/index.html">
    Doxygen 1.8.12</a> </li>
  </ul>
</div>
<!-- and now, plug in our script to tweak the page: -->
<script type="text/javascript" src="tomographer_script_setup.js"></script>
</body>
</html>
